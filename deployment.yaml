apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: pokeapi
  name: pokeapi
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pokeapi
  template:
    metadata:
      labels:
        app: pokeapi
    spec:
      containers:
      - image: sahat850/pokeapi:latest
        name: pokeapi
        ports:
        - containerPort: 8080
        resources:
          limits:
            cpu: "250m"
            memory: "250Mi"
          requests:
            cpu: "100m"
            memory: "128Mi"
      restartPolicy: Always

---

apiVersion: v1
kind: Service
metadata:
  labels:
    app: pokeapi
  name: pokeapi
spec:
  ports:
  - name: "pokeapi"
    port: 80
    targetPort: 8080
  selector:
    app: pokeapi
  type: LoadBalancer

---

apiVersion: v1
kind: Secret
metadata:
  name: pokeapi-ssl-certificate
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUUrRENDQStDZ0F3SUJBZ0lTQklUcU9aa3p6
    cXJDc0FYdUZyVUROdXc4TUEwR0NTcUdTSWIzRFFFQkN3VUEKTURJeEN6QUpCZ05WQkFZVEFsVlRN
    Ull3RkFZRFZRUUtFdzFNWlhRbmN5QkZibU55ZVhCME1Rc3dDUVlEVlFRRApFd0pTTXpBZUZ3MHlO
    REF5TWpNd01UQTFNekphRncweU5EQTFNak13TVRBMU16RmFNQmt4RnpBVkJnTlZCQU1NCkRpb3Vi
    bVYwYVdSdUxtMTVMbWxrTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FR
    RUEKeFFPb2xidjkrNi9Xb09PazFHUVk5ZU1HZUxlUjdBaTVJVlIrcVVPU2tSU1VZUk56N2k2S3Vn
    WnpGU3k0S3ZNbQpZTVBXbGFEeTlNbnhtUkdrUGhTblN3RytQM3FNUU1UbStkR0t3Vi9KazBZSE5y
    enF3VDhkVFBkUzREOWNoUUpQCnJ4SXZySDJ4UjNOeS93em0rcWtRb2d0ZkI2WU05bXc0eHdjRFMy
    aHNSK1FMTjZ6eHAxeWdCUCtmTlE5NTAvUngKQk5pc1oyRUUvYU55WUE0eFBGUEdDWGpEZU8xMWlH
    V3RDWFh4Nm5BZVpjWlplMU84cHpPU2xob3U4aEJEWU5ITgpQODZrUEVMMmtCekpXaVpFaXhCM0Zv
    enJqMXFVUXZFS2lvMXJHVi9iaDNTTTU5TGEvWExGZ0tlekVrbkxDZUF1CnBSWjd6QytGdXA4SzZm
    N29BeHJjcndJREFRQUJvNElDSHpDQ0Foc3dEZ1lEVlIwUEFRSC9CQVFEQWdXZ01CMEcKQTFVZEpR
    UVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWpBTUJnTlZIUk1CQWY4RUFqQUFNQjBHQTFV
    ZApEZ1FXQkJTbFVWK2JZYlh5RkFDeEo5enpTZnl3NnNoTitUQWZCZ05WSFNNRUdEQVdnQlFVTHJN
    WHQxaFd5NjVRCkNVRG1INitkaXhUQ3hqQlZCZ2dyQmdFRkJRY0JBUVJKTUVjd0lRWUlLd1lCQlFV
    SE1BR0dGV2gwZEhBNkx5OXkKTXk1dkxteGxibU55TG05eVp6QWlCZ2dyQmdFRkJRY3dBb1lXYUhS
    MGNEb3ZMM0l6TG1rdWJHVnVZM0l1YjNKbgpMekFuQmdOVkhSRUVJREFlZ2c0cUxtNWxkR2xrYmk1
    dGVTNXBaSUlNYm1WMGFXUnVMbTE1TG1sa01CTUdBMVVkCklBUU1NQW93Q0FZR1o0RU1BUUlCTUlJ
    QkJRWUtLd1lCQkFIV2VRSUVBZ1NCOWdTQjh3RHhBSFlBN3MzUVpOWGIKR3M3RlhMZWR0TTBUb2pL
    SFJueTg3TjdEVVVoWlJuRWZ0WnNBQUFHTjA3WHlQUUFBQkFNQVJ6QkZBaUExZFprSApzZzIvQzFB
    Y3FTK1ZlVmNwSmtWNlRzQTJsNzJ6dDlUN2RnZWtDd0loQU9MOFJkbFdmeVJGSjFldW4yQUp1a21i
    CmxpMHhMTUVXbk9KME8zSTVzM0oyQUhjQVNMRGphOXFtUnpRUDVXb0MrcDB3Nnh4U0FjdFczU3lC
    MmJ1L3F6blkKaEhNQUFBR04wN1h6M1FBQUJBTUFTREJHQWlFQWhuWllyVUIxaEkzYkN4ZSs5ZWt6
    YVFRbGhCRCtENW1XZFpPNgo0NTNTM0VZQ0lRQ21obERYd29tcDFLNHVBcW1LcGVSZk5wdE9kcjVM
    bW9BUm5kQ3dCcm9GK0RBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FRRUFUWHY5V3RVSk84WmVsSDkx
    eHRNS0NXS202cmxybnNLeEZBUHNTQ3NxMUlFNnArdysKaktzUWNCdUEwNXFSeUNVSVZSZndydmNI
    cUZVNTc0RGZpeHFndWxTUU1Zb3R4a0FPMDFQT28wY0ZzQ1p5czYwVwpLblhnWnFZTktDNEsxT0Vj
    WUZjRkNnanVFSmNoWDQ2NUVqWDkrWVNyWG9GNHRZWEtpeTRjU3FjUVMzc3FpbnBXCjJqUXpWNy9U
    OEE2aGN2T3FwT2NTdEE4cmkzK3BnTGg4ZHJxQWkzWG1Sc0wvZnpVNTRUaGhocS9GSmRzcTJGTFQK
    RnZiSE1mT0I3NTJYV3k0bGRjRDI3c3FINS9EOWdNUGVMNFJIVTBGWVFrRjNIRGpOdFkxZld6ckVW
    ZjY4MnVTdwpDRVNWRVZyc3Q4WDRiL0hYcGEwekk1VDZrTDJqcWdrcGVQZURKQT09Ci0tLS0tRU5E
    IENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeFFPb2xidjkr
    Ni9Xb09PazFHUVk5ZU1HZUxlUjdBaTVJVlIrcVVPU2tSU1VZUk56CjdpNkt1Z1p6RlN5NEt2TW1Z
    TVBXbGFEeTlNbnhtUkdrUGhTblN3RytQM3FNUU1UbStkR0t3Vi9KazBZSE5yenEKd1Q4ZFRQZFM0
    RDljaFFKUHJ4SXZySDJ4UjNOeS93em0rcWtRb2d0ZkI2WU05bXc0eHdjRFMyaHNSK1FMTjZ6eApw
    MXlnQlArZk5ROTUwL1J4Qk5pc1oyRUUvYU55WUE0eFBGUEdDWGpEZU8xMWlHV3RDWFh4Nm5BZVpj
    WlplMU84CnB6T1NsaG91OGhCRFlOSE5QODZrUEVMMmtCekpXaVpFaXhCM0ZvenJqMXFVUXZFS2lv
    MXJHVi9iaDNTTTU5TGEvWExGZ0tlekVrbkxDZUF1CnBSWjd6QytGdXA4SzZmN29BeHJjcndJREFR
    QUJBb0lCQVFEQVZXNERuOSs0RWxYSwpBL01xbGYzNExvWm0yMjlOcXNaeFQzZkg3dnZyUHRnTVhW
    MVVMWU9wVUJxUmxYTEdHMUpnTFZBVUMyaWtxWEYvCktjWGFCWGU4dGhyeEJjWmVoTnVwRDNRU2pG
    elJ0Zy9jMUZtcUJ0K24vOXVjcUw2OTZ4KzNubDJFVzhEeUxEY2IKMzVDdkxOWGNISlhOZGNJNTRE
    VWR1Qzd6TXlKaW12d0RHUkFXayt5Sm1KMzh2eGFSOUhVckdsd1VRaThBWTljdwpiNFpZNUlIaGla
    VUZrc1B3czVLa1B2WXdUQVNYUjBpTzRKQkJHRlZpbmVwdHlYMlFEdmRIc0d2NWVHMm1RWW50CmpC
    dzJ0OGZ6Sk9SOWlvRGFCZVpFc1dUNFROYlEydFRuTFdnRUY4QTR2cEZLZDN0WFNzR0RJNUhqSVIy
    UzBoV0cKVDc4VjVTVUJBb0dCQU9NZGU0NkJnKy9Fa2FyTU5QS2R2QVhRV3QwZ0JhSkJLQldMVzNK
    aEYvY1YvTXhMQk9YeApnYnBKTTN6K3VodGRZWmZpOVRKa3VMbWZmQnp1Ti9sNGlFTzVoc2RhcGRa
    R3FDRFdVcitDMEV2a3o5SnVZL2Q2CjRRTTQwb2oxc1p5bk5LdmhDR216ejZ2aktwYjJPTDRzbmdC
    K0JmdkxhdlNPN2haQ3NvdjR5R2toQW9HQkFONFMKSTFxcXAraWxzRVBlZEQ0eFc5ZGlkYTZ5dFov
    MkNsNTJWbjlnL2ZRMzlLNVlET3NQWk44RWY1NDdqUlZnbVA5CkxQV2hZTjVhL0JtV0c0cHFDYjBq
    OTdJL3dpeWR3RnBDM0VMUitucVR6NUhLZG5CTTBraThaZVJMRHZQRy9Oagphbm1mdjhWVmpNcW9q
    Zmp4M3U0d2lLMW5EZWJNQWUzVDBENXZ3NU8zZDZpdkZ1TmhvUU1FenB4MjRSUWU0dE83CnRpVkd4
    d0p0Z2hQV2V5bDdibjFycnNZS09uNUo2Q1pmTGhtNURSVUwyR1BQR0w2S3pCQnBNS1QvQUY2c01Z
    MStMeFQKZ3NwTVNWb2s5L2Y2NjBiUVg0UWF4elJWYzVZaW52c1RJV0g2dU5HSFRUZXdTMU4vYXlv
    Qm9ndW50djVDWQo1LzZBU1dDbmR4V0dzMmVnYlMxZmlFNkt1cWxCd2drUHdHbC9vUDBTbnhTQVdH
    QmI1VXdLSmE0VkQwMkpKN3lxNQp4dDZ5U2x2b2VyZDZGQUN0dmZCSzNoM01lQ3Y5U3FvZVhKZ0Fq
    Nnpic0NqMWJwUzN2bzlsc2dEcC9qR2UrNWVHdFgvCnB2WkFiTHBpMTVtQ2dVbTdtei9tc0R4UW5X
    Z3k1M2czRjAzT1RaYzBFc0llMlhLV0dZL0p0QU9RdENpQUNpT3AKRUxrcGpaQkR5ZVhaV1ExaHJr
    L3VaMTdPcC9iM1h2MlJwV1JxR0hqK0dPTVRKUHdzUUNNUFpLUU1rQUVpN09KVQpaN3NvdlJvS3FZ
    amR3M3VSTmI5c2MwMXhLR2l1c3NkemRmc1JiNzAwRVlnbUlkNGdzdHpEaTZ4Q2hRb2U3a0Q0Ck5v
    Mzgvdm5FSXlZUWZZQWlYQmhWbllLYjB3SytYMWtoRStwc0NKTWVYaTZqUXpYaXBFcjlPNFVXdkxL
    Y1A3Vm4KWVd3U01zSW16dVJuMWwzSzVtVlE1cVd2RVJUZ01kT21jTkNzSjg1Rk51M01BZkJmYzJK
    YlRneE93bnZDNQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=


# Ingress for HTTPS
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: pokeapi-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
spec:
  tls:
  - hosts:
    - netdin.my.id  # Your domain name
    secretName: pokeapi-ssl-certificate
  rules:
  - host: netdin.my.id
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: pokeapi
            port:
              number: 80
